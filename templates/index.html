<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatbotGym</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>ChatbotGym</h1>
        <div class="mode-selector">
            <button id="manual-mode" class="mode-button active">Manual Chat</button>
            <button id="simulation-mode" class="mode-button">Simulation Mode</button>
            <button id="batch-mode" class="mode-button">Batch Run</button>
            <button id="analyze-mode" class="mode-button">Analyze Transcripts</button>
        </div>
        
        <!-- Manual Chat Interface -->
        <div id="manual-chat" class="chat-interface active">
            <div id="chat-container"></div>
            <div class="input-container">
                <input type="text" id="message-input" placeholder="Type your message...">
                <button id="send-button" onclick="sendMessage()">Send</button>
            </div>
        </div>
        
        <!-- Simulation Interface -->
        <div id="simulation-chat" class="chat-interface">
            <div class="simulation-controls">
                <select id="user-agent-type">
                    <option value="frustrated_customer">Frustrated Customer (Delayed Materials)</option>
                    <option value="confused_elderly">Confused Elderly (Tool Setup)</option>
                    <option value="anxious_student">Anxious DIYer (Overwhelmed Project)</option>
                    <option value="demanding_executive">Demanding Contractor (Urgent Job)</option>
                    <option value="frustrated_homeowner">Frustrated Homeowner (DIY Project)</option>
                    <option value="anxious_tech_user">Anxious Customer (Tool Problems)</option>
                    <option value="demanding_customer">Demanding Customer (Delayed Order)</option>
                    <option value="elderly_homeowner">Elderly Homeowner (Home Project)</option>
                </select>
                <select id="chat-agent-type">
                    <option value="homedepo_agent">Home Depot Agent</option>
                </select>
                <input type="number" id="max-turns" value="20" min="1" max="20" step="1">
                <button id="start-simulation" onclick="startSimulation()">Start Simulation</button>
            </div>
            <div id="simulation-container"></div>
            <div id="simulation-status"></div>
        </div>
        
        <!-- Batch Run Interface -->
        <div id="batch-chat" class="chat-interface">
            <div class="batch-controls">
                <div class="batch-info">
                    <h3>Batch Run - All User Agent Types</h3>
                    <p>This will run simultaneous conversations with all 8 user agent types against the selected chat agent.</p>
                </div>
                <div class="batch-settings">
                    <label for="batch-chat-agent-type">Chat Agent:</label>
                    <select id="batch-chat-agent-type">
                        <option value="homedepo_agent">Home Depot Agent</option>
                    </select>
                    <label for="batch-max-turns">Max turns per conversation:</label>
                    <input type="number" id="batch-max-turns" value="20" min="1" max="30" step="1">
                    <button id="start-batch" onclick="startBatchRun()">Start Batch Run</button>
                </div>
            </div>
            <div id="batch-container"></div>
            <div id="batch-status"></div>
        </div>
        
        <!-- Analyze Transcripts Interface -->
        <div id="analyze-chat" class="chat-interface">
            <div class="analyze-controls">
                <div class="analyze-info">
                    <h3>Analyze Conversation Transcripts</h3>
                    <p>Select a folder containing conversation transcript JSON files. Each transcript will be analyzed using AI to evaluate conversation quality, agent performance, and customer satisfaction.</p>
                </div>
                <div class="analyze-settings">
                    <label for="folder-input">Select Folder:</label>
                    <input type="file" id="folder-input" webkitdirectory directory multiple accept=".json">
                    <button id="start-analyze" onclick="startAnalyze()" disabled>Analyze Transcripts</button>
                </div>
            </div>
            <div id="analyze-container"></div>
            <div id="analyze-status"></div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html> 